{"version":3,"sources":["../../../src/components/provider/UALProvider.js"],"names":["UALProvider","props","type","availableAuthenticators","loggedIn","filter","auth","constructor","name","length","clearCache","autoLoginAuthenticator","authenticateWithoutAccountInput","state","setState","availableCheck","setInterval","isLoading","clearInterval","message","i18n","t","window","localStorage","removeItem","authenticator","logout","e","console","warn","chains","authenticators","appName","modal","loading","users","activeAuthenticator","activeUser","isAutoLogin","error","hideModal","showModal","forEach","reset","DEFAULT_STATUS","fullLogout","restart","broadcastStatus","status","authenticatorName","getStyle","text","login","getAccountName","accountName","setItem","submitAccountForLogin","accountInput","requiresGetKeyConfirmation","getItem","ual","UAL","getAuthenticators","getAuthenticatorInstance","Error","msg","source","errType","UALErrorType","Login","UALError","fetchAuthenticators","modalStyles","baseFont","children","Component","propTypes","PropTypes","arrayOf","object","isRequired","oneOfType","node","string","bool","defaultProps"],"mappings":"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","sourcesContent":["/* eslint-disable react/no-unused-state */\nimport React, { Component } from 'react'\nimport PropTypes from 'prop-types'\nimport i18n from '../../i18n'\nimport '../../types'\nimport { UAL, UALError, UALErrorType } from 'universal-authenticator-library'\n\nimport { UALContext } from './UALContext'\nimport { DEFAULT_STATUS } from '../../constants/provider'\nimport { UALBox } from '../modal/UALBox'\n\nimport { modalStyles } from '../../styles/provider'\nimport { baseFont } from '../../styles/base'\n\n/**\n * Wrapper component that provides a child app with access to UAL functionality\n */\nexport class UALProvider extends Component {\n  static displayName = 'UALProvider'\n\n  constructor(props) {\n    super(props)\n    /**\n     * @namespace UAL\n     */\n    this.state = {\n      /**\n       * @memberof UAL\n       * @desc chain list from props\n       * @type {Chain[]} chains\n       */\n      chains: props.chains,\n      /**\n       * @memberof UAL\n       * @desc authenticator instances from props\n       * @type {Authenticator[]} authenticators\n       */\n      authenticators: props.authenticators,\n      /**\n       * @memberof UAL\n       * @desc available authenticator list\n       * @type {Authenticator[]} availableAuthenticators\n       */\n      availableAuthenticators: [],\n      /**\n       * @memberof UAL\n       * @desc name of app\n       * @type {string} appName\n       */\n      appName: props.appName,\n      /**\n       * @memberof UAL\n       * @desc whether or not show modal, initialized via props\n       * @type {boolean} modal\n       */\n      modal: props.modal,\n      /**\n       * @memberof UAL\n       * @desc loading state of UAL\n       * @type {boolean} loading\n       */\n      loading: false,\n      /**\n       * @memberof UAL\n       * @desc list of authenticated users\n       * @type {User[]} users\n       */\n      users: [],\n      /**\n       * @memberof UAL\n       * @desc authenticator currently used\n       * @type {Authenticator} activeAuthenticator\n       */\n      activeAuthenticator: null,\n      /**\n       * @memberof UAL\n       * @desc logged in user\n       * @type {User} activeUser\n       */\n      activeUser: null,\n      /**\n       * @memberof UAL\n       * @desc whether or not activeAuthenticator should auto login\n       * @type {boolean} isAutoLogin\n       */\n      isAutoLogin: false,\n      /**\n       * @memberof UAL\n       * @desc captured error if any\n       * @type {UALError|null} error\n       */\n      error: null,\n      /**\n       * @memberof UAL\n       * @desc message, if any, accompanying current UAL state\n       * @type {string} message\n       */\n      message: '',\n      /**\n       * @memberof UAL\n       * @function\n       * @name hideModal\n       * @desc hides the modal\n       * @return {Void}\n       */\n      hideModal: () => this.setState({ modal: false, loading: true, message: i18n.t('loadingAuthenticators') }),\n      /**\n       * @memberof UAL\n       * @function\n       * @name showModal\n       * @desc shows the modal\n       * @return {Void}\n       */\n      showModal: () => {\n        const { availableAuthenticators } = this.state\n        availableAuthenticators.forEach(auth => auth.reset())\n        this.setState({ modal: true })\n      },\n      /**\n       * @memberof UAL\n       * @function\n       * @name logout\n       * @desc logs user out of authenticator and resets UAL state\n       * @return {Void}\n       */\n      logout: () => {\n        const { activeAuthenticator } = this.state\n        this.setState(DEFAULT_STATUS, () => activeAuthenticator && this.fullLogout(activeAuthenticator))\n      },\n      /**\n       * @memberof UAL\n       * @function\n       * @name restart\n       * @desc resets all available authenticators and resets UAL state\n       * @return {Void}\n       */\n      restart: () => {\n        this.setState({ DEFAULT_STATUS }, () => {\n          const { availableAuthenticators } = this.state\n          availableAuthenticators.forEach(auth => auth.reset())\n          this.setState(availableAuthenticators)\n        })\n      },\n      /**\n       * @memberof UAL\n       * @function\n       * @name broadcastStatus\n       * @desc dispatches a provider state update\n       * @return {Void}\n       */\n      broadcastStatus: (status = DEFAULT_STATUS) => this.setState(status),\n      /**\n       * @memberof UAL\n       * @function\n       * @name authenticateWithoutAccountInput\n       * @desc attempts authentication with an authenticator not requiring account input\n       * @return {Void}\n       * @param {Authenticator} authenticator\n       * @param {boolean} [false] isAutoLogin\n       */\n      authenticateWithoutAccountInput: async (authenticator, isAutoLogin = false) => {\n        const { broadcastStatus } = this.state\n        broadcastStatus({\n          loading: true,\n          message: i18n.t('continueWithAuthenticator', { authenticatorName: authenticator.getStyle().text }),\n          activeAuthenticator: authenticator,\n        })\n        try {\n          const users = await authenticator.login()\n          const accountName = await users[0].getAccountName()\n          if (!isAutoLogin) {\n            window.localStorage.setItem('UALLoggedInAuthType', authenticator.constructor.name)\n          }\n          broadcastStatus({\n            activeUser: users[users.length - 1],\n            users,\n            isAutoLogin,\n            message: i18n.t('currentlyLoggedInAs', { accountName }),\n          })\n        } catch (err) {\n          broadcastStatus({\n            loading: false,\n            error: err,\n            message: err.message,\n          })\n        }\n      },\n      /**\n       * @memberof UAL\n       * @function\n       * @name submitAccountForLogin\n       * @desc attempts authentication\n       * @return {Void}\n       * @param {string} accountInput\n       * @param {Authenticator} authenticator\n       */\n      submitAccountForLogin: async (accountInput, authenticator) => {\n        const { broadcastStatus } = this.state\n        const authenticatorName = authenticator.constructor.name\n        broadcastStatus({\n          loading: true,\n          message: authenticator.requiresGetKeyConfirmation()\n            ? i18n.t('waitWhileFindAccountWithConfirmation')\n            : i18n.t('waitWhileFindAccount'),\n        })\n        try {\n          const users = await authenticator.login(accountInput)\n          window.localStorage.setItem('UALLoggedInAuthType', authenticatorName)\n          window.localStorage.setItem('UALAccountName', accountInput)\n          broadcastStatus({\n            activeUser: users[users.length - 1],\n            activeAuthenticator: authenticator,\n            users,\n            message: i18n.t('currentlyLoggedInAs', { accountName: accountInput }),\n          })\n        } catch (err) {\n          broadcastStatus({\n            error: err,\n            message: err.message,\n            loading: false,\n          })\n        }\n      },\n    }\n  }\n\n  componentDidMount() {\n    const { chains, appName, authenticators, authenticateWithoutAccountInput, submitAccountForLogin } = this.state\n    const type = window.localStorage.getItem('UALLoggedInAuthType')\n    const accountName = window.localStorage.getItem('UALAccountName')\n    const ual = new UAL(chains, appName, authenticators)\n    try {\n      const { availableAuthenticators } = ual.getAuthenticators()\n      if (type) {\n        const authenticator = this.getAuthenticatorInstance(type, availableAuthenticators)\n        if (!authenticator) {\n          throw new Error('authenticator instance not found')\n        }\n        const availableCheck = setInterval(() => {\n          if (!authenticator.isLoading()) {\n            clearInterval(availableCheck)\n            // Only Ledger requires an account name\n            if (accountName) {\n              submitAccountForLogin(accountName, authenticator)\n            } else {\n              authenticateWithoutAccountInput(authenticator)\n            }\n          }\n        }, 250)\n      }\n    } catch (e) {\n      this.clearCache()\n      const msg = i18n.t('sessionEndedNeedLogin')\n      const source = type || 'Universal Authenticator Library'\n      const errType = UALErrorType.Login\n      console.warn(new UALError(msg, errType, e, source))\n    } finally {\n      const { availableAuthenticators, autoLoginAuthenticator } = ual.getAuthenticators()\n      this.fetchAuthenticators(availableAuthenticators, autoLoginAuthenticator)\n    }\n  }\n\n  componentDidUpdate() {\n    const { loading, message, availableAuthenticators, broadcastStatus } = this.state\n    if (loading && message === i18n.t('loadingAuthenticators') && availableAuthenticators.length) {\n      broadcastStatus({ message: i18n.t('authenticatorsLoaded'), loading: false })\n    }\n  }\n\n  /**\n   * Verifies a logged in user's authenticator is still app supported\n   * @method\n   * @param {string} type - authenticator type of sessioned user\n   * @param {Object[]} availableAuthenticators - list of available app supported authenticators\n   * @return {number|boolean}\n   */\n  getAuthenticatorInstance = (type, availableAuthenticators) => {\n    const loggedIn = availableAuthenticators.filter(auth => auth.constructor.name === type)\n    if (!loggedIn.length) {\n      this.clearCache()\n    }\n    return loggedIn.length ? loggedIn[0] : false\n  }\n\n  /**\n   * Renders available authenticators or starts auto-login process if applicable\n   * @method\n   * @param {Authenticator[]} availableAuthenticators - list of available app supported authenticators\n   * @param {Authenticator} autoLoginAuthenticator - auto-login authenticator\n   * @return {Void}\n   */\n  fetchAuthenticators = (availableAuthenticators, autoLoginAuthenticator) => {\n    const { authenticateWithoutAccountInput } = this.state\n    if (autoLoginAuthenticator) {\n      this.setState({ availableAuthenticators: [autoLoginAuthenticator] }, () => {\n        const availableCheck = setInterval(() => {\n          if (!autoLoginAuthenticator.isLoading()) {\n            clearInterval(availableCheck)\n            authenticateWithoutAccountInput(autoLoginAuthenticator, true)\n          }\n        }, 250)\n      })\n    } else {\n      this.setState({ availableAuthenticators }, () => {\n        this.setState({ message: i18n.t('authenticatorsLoaded') })\n      })\n    }\n  }\n\n  /**\n   * Clears locally stored user session\n   * @method\n   * @return {Void}\n   */\n  clearCache = () => {\n    window.localStorage.removeItem('UALLoggedInAuthType')\n    window.localStorage.removeItem('UALAccountName')\n  }\n\n  /**\n   * Clears localStorage and logs out user\n   * @method\n   * @param {Authenticator} authenticator - used authenticator\n   * @return {Void}\n   */\n  fullLogout = (authenticator) => {\n    this.clearCache()\n    authenticator.logout()\n      .catch(e => console.warn(e))\n  }\n\n  render() {\n    const modal = this.state.modal && <div style={modalStyles}><UALBox /></div>\n    return (\n      <UALContext.Provider value={this.state}>\n        <style>{baseFont}</style>\n        { modal }\n        { this.props.children }\n      </UALContext.Provider>\n    )\n  }\n}\n\n/**\n * @memberof UALProvider\n * @name props\n * @prop {Chain[]} chains - list of chains the app supports\n * @prop {Authenticator[]} authenticators - list of authenticators the app supports\n * @prop {Node[]|Node} children - child app(s)\n * @prop {string} appName - name of app\n * @prop {boolean} modal - whether or not to show modal\n */\nUALProvider.propTypes = {\n\n  chains: PropTypes.arrayOf(PropTypes.object).isRequired,\n  authenticators: PropTypes.arrayOf(PropTypes.object).isRequired,\n  children: PropTypes.oneOfType([\n    PropTypes.arrayOf(PropTypes.node),\n    PropTypes.node,\n  ]).isRequired,\n  appName: PropTypes.string.isRequired,\n  modal: PropTypes.bool,\n}\n\nUALProvider.defaultProps = {\n  modal: false,\n}\n"],"file":"UALProvider.js"}