{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.UALBoxParts = void 0;\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _i18n = _interopRequireDefault(require(\"../../i18n\"));\n\nvar _UALAccountInput = require(\"../authentication/UALAccountInput\");\n\nvar _UALAuthButton = require(\"../authentication/UALAuthButton\");\n\nvar _UALLearnMore = require(\"../info/UALLearnMore\");\n\nvar _UALExitButton = require(\"../misc/UALExitButton\");\n\nvar _UALErrorMessage = require(\"../info/UALErrorMessage\");\n\nvar _UALLoadingIcon = require(\"../misc/UALLoadingIcon\");\n\nvar _UALInstallAuth = require(\"../authentication/UALInstallAuth\");\n\nvar _title = require(\"../../styles/title\");\n\nvar _back = require(\"../../styles/buttons/back\");\n\nvar _retry = require(\"../../styles/buttons/retry\");\n\nvar _instructions = require(\"../../styles/instructions\");\n\nvar _utils = require(\"../../utils\");\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nvar UALBoxParts =\n/*#__PURE__*/\nfunction () {\n  function UALBoxParts() {\n    _classCallCheck(this, UALBoxParts);\n  }\n\n  _createClass(UALBoxParts, null, [{\n    key: \"authButton\",\n\n    /**\n     * returns an instance of UALAuthButton\n     * @memberof UALBoxParts\n     * @method\n     * @name authButton\n     * @return {ReactElement}\n     */\n    value: function authButton(authenticator, index, instructions, authenticate, checkAuthenticators, enterInstallScreen) {\n      return _react[\"default\"].createElement(_UALAuthButton.UALAuthButton, {\n        key: index,\n        index: index,\n        instructions: instructions,\n        onErroredState: checkAuthenticators,\n        authenticator: authenticator,\n        onAuthenticatorSelect: authenticate,\n        onRequestInstall: enterInstallScreen\n      });\n    }\n    /**\n     * returns an instance of UALAuthInput\n     * @memberof UALBoxParts\n     * @method\n     * @name accountLogin\n     * @return {ReactElement}\n     */\n\n  }, {\n    key: \"accountLogin\",\n    value: function accountLogin(submitAccountForLogin, loading, authenticator) {\n      return _react[\"default\"].createElement(_UALAccountInput.UALAccountInput, {\n        submitAccountForLogin: submitAccountForLogin,\n        authenticator: authenticator,\n        loading: loading\n      });\n    }\n    /**\n     * returns the secondary instructions for a given screen\n     * @memberof UALBoxParts\n     * @method\n     * @name secondaryInstructions\n     * @return {HTML}\n     */\n\n  }, {\n    key: \"secondaryInstructions\",\n    value: function secondaryInstructions(_ref, refreshBox) {\n      var _secondaryInstructions = _ref.secondaryInstructions,\n          showInstallScreen = _ref.showInstallScreen;\n\n      var retry = _react[\"default\"].createElement(\"strong\", {\n        role: \"button\",\n        \"aria-label\": \"Go Back\",\n        tabIndex: \"-1\",\n        style: _retry.retryButton,\n        onClick: refreshBox\n      }, _i18n[\"default\"].t('retry'));\n\n      if (_secondaryInstructions !== '') {\n        var trueStyle = showInstallScreen ? _instructions.secondaryInstructionsLight : _instructions.secondaryInstructionsText;\n        return _react[\"default\"].createElement(\"p\", {\n          style: trueStyle\n        }, _secondaryInstructions, '  ', !showInstallScreen && retry, !showInstallScreen && '.');\n      }\n\n      return null;\n    }\n    /**\n     * returns an instance of UALInstallAuth\n     * @memberof UALBoxParts\n     * @method\n     * @name installAuthenticatorSection\n     * @return {ReactElement}\n     */\n\n  }, {\n    key: \"installAuthenticatorSection\",\n    value: function installAuthenticatorSection(authenticator) {\n      return _react[\"default\"].createElement(_UALInstallAuth.UALInstallAuth, {\n        authenticator: authenticator\n      });\n    }\n    /**\n     * returns a back-button DOM element\n     * @memberof UALBoxParts\n     * @method\n     * @name backButton\n     * @return {HTML}\n     */\n\n  }, {\n    key: \"backButton\",\n    value: function backButton(_ref2, goBackToAuthSelect) {\n      var showAccountInput = _ref2.showAccountInput,\n          error = _ref2.error,\n          loading = _ref2.loading,\n          logout = _ref2.logout,\n          showInstallScreen = _ref2.showInstallScreen;\n      var goBackAction = error ? logout : goBackToAuthSelect;\n\n      if ((error || showAccountInput || showInstallScreen) && !loading) {\n        return _react[\"default\"].createElement(\"p\", {\n          style: _back.backButtonWrapper\n        }, _react[\"default\"].createElement(\"span\", {\n          role: \"button\",\n          \"aria-label\": \"Go Back\",\n          tabIndex: \"-1\",\n          style: _back.backButton,\n          onClick: goBackAction\n        }, _react[\"default\"].createElement(\"strong\", {\n          style: _back.backButtonText\n        }, _i18n[\"default\"].t('goBack'))));\n      }\n\n      return null;\n    }\n    /**\n     * returns instructions on dealing with no available authenticators\n     * @memberof UALBoxParts\n     * @method\n     * @name noAvailableAuthenticators\n     * @return {HTML}\n     */\n\n  }, {\n    key: \"noAvailableAuthenticators\",\n    value: function noAvailableAuthenticators() {\n      return _react[\"default\"].createElement(\"p\", {\n        style: _instructions.secondaryInstructionsText\n      }, _i18n[\"default\"].t('noAuthenticatorsAvailableForDevice'));\n    }\n    /**\n     * returns the main content of UALBox\n     * @memberof UALBoxParts\n     * @method\n     * @name mainContent\n     * @return {ReactElement[]}\n     */\n\n  }, {\n    key: \"mainContent\",\n    value: function mainContent(app, authenticate, checkAuthenticators, enterInstallScreen) {\n      var _this = this;\n\n      var submitAccountForLogin = app.submitAccountForLogin,\n          authenticator = app.authenticator,\n          loading = app.loading,\n          error = app.error,\n          showAccountInput = app.showAccountInput,\n          showInstallScreen = app.showInstallScreen,\n          availableAuthenticators = app.availableAuthenticators,\n          instructions = app.instructions;\n      var authProps = [authenticate, checkAuthenticators, enterInstallScreen];\n      var mainContent = !loading ? availableAuthenticators.map(function (auth, index) {\n        return _this.authButton.apply(_this, [auth, index, instructions].concat(authProps));\n      }) : _react[\"default\"].createElement(_UALLoadingIcon.UALLoadingIcon, {\n        withContainer: true\n      });\n\n      if (!loading && !availableAuthenticators.length) {\n        mainContent = this.noAvailableAuthenticators();\n      }\n\n      if (showAccountInput || showInstallScreen) {\n        mainContent = showInstallScreen ? this.installAuthenticatorSection(authenticator) : this.accountLogin(submitAccountForLogin, loading, authenticator);\n      }\n\n      return !error && mainContent;\n    }\n    /**\n     * returns an instance of UALErrorMessage\n     * @memberof UALBoxParts\n     * @method\n     * @name errorMessage\n     * @return {ReactElement}\n     */\n\n  }, {\n    key: \"errorMessage\",\n    value: function errorMessage(_ref3) {\n      var error = _ref3.error;\n\n      if (error) {\n        return _react[\"default\"].createElement(_UALErrorMessage.UALErrorMessage, {\n          error: error\n        });\n      }\n\n      return null;\n    }\n    /**\n     * returns an instance of UALLearnMore\n     * @memberof UALBoxParts\n     * @method\n     * @name learnMore\n     * @return {ReactElement}\n     */\n\n  }, {\n    key: \"learnMore\",\n    value: function learnMore(_ref4) {\n      var showAccountInput = _ref4.showAccountInput,\n          showInstallScreen = _ref4.showInstallScreen,\n          error = _ref4.error,\n          loading = _ref4.loading;\n\n      if (!showAccountInput && !error && !loading && !showInstallScreen) {\n        return _react[\"default\"].createElement(_UALLearnMore.UALLearnMore, null);\n      }\n\n      return null;\n    }\n    /**\n     * returns the background color for a given screen\n     * @memberof UALBoxParts\n     * @method\n     * @name boxBackground\n     * @return {Object}\n     */\n\n  }, {\n    key: \"boxBackground\",\n    value: function boxBackground(_ref5) {\n      var error = _ref5.error,\n          loading = _ref5.loading,\n          showAccountInput = _ref5.showAccountInput,\n          showInstallScreen = _ref5.showInstallScreen,\n          activeAuthenticator = _ref5.activeAuthenticator,\n          authenticator = _ref5.authenticator;\n      var authenticatorStyle = activeAuthenticator && activeAuthenticator.getStyle().background;\n      var background = {};\n\n      if (!authenticatorStyle) {\n        authenticatorStyle = authenticator && authenticator.getStyle().background;\n      }\n\n      if (showAccountInput || loading || showInstallScreen || error) {\n        background = {\n          backgroundColor: (0, _utils.darkenColor)(authenticatorStyle)\n        };\n      }\n\n      return background;\n    }\n    /**\n     * returns the main title of a screen of UALBox\n     * @memberof UALBoxParts\n     * @method\n     * @name boxTitle\n     * @return {HTML}\n     */\n\n  }, {\n    key: \"boxTitle\",\n    value: function boxTitle(_ref6) {\n      var error = _ref6.error,\n          instructions = _ref6.instructions,\n          showAccountInput = _ref6.showAccountInput,\n          showInstallScreen = _ref6.showInstallScreen,\n          loading = _ref6.loading,\n          message = _ref6.message;\n      var boxTitle = error ? _i18n[\"default\"].t('errorDuring', {\n        src: error.source,\n        type: error.type.toLowerCase()\n      }) : instructions;\n      var titleStyle = error || showAccountInput || loading || showInstallScreen ? _title.titleSecondary : _title.title;\n      var titleContent = !loading || error ? boxTitle : message;\n      return _react[\"default\"].createElement(\"h1\", {\n        style: titleStyle\n      }, titleContent);\n    }\n    /**\n     * returns an instance of UALExitButton\n     * @memberof UALBoxParts\n     * @method\n     * @name exitButton\n     * @return {ReactElement}\n     */\n\n  }, {\n    key: \"exitButton\",\n    value: function exitButton(_ref7) {\n      var error = _ref7.error,\n          showAccountInput = _ref7.showAccountInput,\n          showInstallScreen = _ref7.showInstallScreen,\n          loading = _ref7.loading,\n          hideModal = _ref7.hideModal;\n      return _react[\"default\"].createElement(_UALExitButton.UALExitButton, {\n        isSecondaryStyle: !!error || showAccountInput || !!loading || showInstallScreen,\n        hideModal: hideModal\n      });\n    }\n  }]);\n\n  return UALBoxParts;\n}();\n\nexports.UALBoxParts = UALBoxParts;\n\n_defineProperty(UALBoxParts, \"displayName\", 'UALBoxParts');","map":null,"metadata":{},"sourceType":"script"}